{% extends "admin_base.html" %}
{% block title %}Board{% endblock %}
{% block head %}
    {{ super() }}
    <script type="text/javascript" src={{ url_for("static", filename="js/calendar.js") }}></script>
    <script type="text/javascript" src={{ url_for("static", filename="js/calendar110.json") }}></script>
    <script type="text/javascript" src={{ url_for("static", filename="js/calendar111.json") }}></script>
{% endblock %}
{% block content %}
    <main>
        <div id="banner">
            <!--由Banner組件渲染-->
        </div>
        <hr>
        <div id="board">
            <!--由Board組件渲染-->
        </div>        
    </main>
    <script type="text/babel">
        const calendar110 = JSON.parse(calendar110)
        const calendar111 = JSON.parse(calendar111)
        class Banner extends React.Component{
            state = {}
            render(){
                console.log(this.props);
                return(
                    <div>
                        <div>登入成功，{this.props.name} 你好</div>
                        <div className="logout"><a href="">登出</a></div>
                    </div>
                )
            }
        }
        class Board extends React.Component{
            state = {
                page:1,
                start_index:0,
                date_list:[],
                room_list:[]
            }
            componentDidMount(){
                
            }
            render(){
                const today = new Date();
                const tw_year = today.getFullYear()-1911;
                const firstDayOfYear = new Date(today.getFullYear().toString()+"-01-01");
                let start_index = parseInt((today.getTime()-firstDayOfYear.getTime())/1000/86400)+1
                let end_index = start_index+6

                console.log(calendar110[start_index])
                console.log(calendar110[end_index])
                return(
                    <table>
                        
                    </table>
                )
            }
        }
        addEventListener("load", ()=>{
            currentUserPromise.then(currentUser=>{
                // console.log(currentUser)
                if(currentUser==null){
                    location.href = `${window.origin}/admin`
                }else{
                    ReactDOM.render(<Banner user={currentUser[0]} name={currentUser[1]}/>, document.querySelector("#banner"));
                    ReactDOM.render(<Board/>, document.querySelector("#board"));
                }
            })
        })
        
    </script>
{% endblock %}